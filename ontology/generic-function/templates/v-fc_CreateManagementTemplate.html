<script>
  var notify = new veda.Notify();

  if ( !individual.hasValue("v-s:creator", veda.appointment || veda.user) ) {
    $(".action.save-create", template).click(function () {
      var enterLabel = new veda.IndividualModel("v-s:EnterLabel");
      enterLabel.load().then(function (enterLabel) {
        var personalLabel = prompt( enterLabel.toString(), individual.toString() );
        if (!personalLabel) { return; }
        individual.clone().then(function (personalCreate) {
          personalCreate["rdf:type"] = [ new veda.IndividualModel("v-fc:PersonalCreate") ];
          personalCreate["v-s:creator"] = [];
          personalCreate["v-s:created"] = [];
          personalCreate["rdfs:isDefinedBy"] = [];
          personalCreate["rdfs:label"] = [ personalLabel ];
          var createBlank = individual.hasValue("v-fc:hasBlank") ? individual["v-fc:hasBlank"][0] : undefined;
          if (createBlank && createBlank.object) {
            return createBlank.clone()
            .then(function(personalCreateBlank) {
              personalCreateBlank.object = createBlank.object;
              return personalCreateBlank.updateBlank();
            })
            .then(function(personalCreateBlank) {
              personalCreate["v-fc:hasBlank"] = [ personalCreateBlank ];
              return personalCreate.save();
            });
          } else {
            return personalCreate.save();
          }
        })
        .then(function (personalCreate) {
          return veda.user.aspect.load().then(function (aspect) {
            aspect.addValue("v-s:hasCreate", personalCreate);
            return aspect.save();
          });
        })
        .then(function() {
          return new veda.IndividualModel("v-fc:BlankSuccessfullySaved").load();
        })
        .then(function(message) {
          notify("success", { message: message });
        })
        .catch(function (error) {
          notify("danger", { message: error });
        });
      });
    });
  } else {
    $(".action.save-create", template).remove();
  }

  individual.rights.then(function (rights) {
    if ( rights.hasValue("v-s:canUpdate", true) ) {
      $(".action.update-create", template).click(function () {
        var createBlank = individual.hasValue("v-fc:hasBlank") ? individual["v-fc:hasBlank"][0] : undefined;
        if (createBlank && createBlank.object) {
          createBlank.updateBlank()
          .then(function () {
            return new veda.IndividualModel("v-fc:BlankSuccessfullyUpdated").load();
          })
          .then(function (message) {
            notify("success", { message: message});
          })
          .catch(function (error) {
            notify("danger", { message: error });
          });
        }
      });
    } else {
      $(".action.update-create", template).remove();
    }
    if ( rights.hasValue("v-s:canDelete", true) ) {
      $(".action.delete-create", template).click(function () {
        veda.user.aspect.load().then(function (aspect) {
          aspect.removeValue("v-s:hasCreate", individual);
          return aspect.save();
        }).then(function () {
          return individual.delete();
        }).then(function () {
          return new veda.IndividualModel("v-fc:BlankSuccessfullyDeleted").load();
        }).then(function (message) {
          notify("success", { message: message });
        }).catch(function (error) {
          notify("danger", { message: error });
        });
      });
    } else {
      $(".action.delete-create", template).remove();
    }
  });
//# sourceURL=v-fc_CreateManagementTemplate.html_pre
</script>
<div>
  <div class="container sheet">
    <div class="ribbon-wrapper top-left">
      <div class="ribbon top-left success" about="v-fc:CreateBundle" property="rdfs:label"></div>
    </div>
    <div class="actions text-right">
      <button class="action save-create btn btn-success" about="v-fc:SavePersonalBlank" property="rdfs:label"></button>
      <button class="action update-create btn btn-success" about="v-fc:UpdatePersonalBlank" property="rdfs:label"></button>
      <button class="action delete-create btn btn-link" about="v-s:Delete" property="rdfs:label"></button>
    </div>
  </div>
  <div about="@" rel="v-fc:hasBlank" data-template="v-fc_BlankTemplate.html"></div>
</div>