<script>
  var isMutual = container.attr("data-mutual") === "true";
  var rowTmpl = $("tbody", template).html();

  $("#add-link", template).click(function () {
    $(".links-table", template).removeClass("hidden");
    var cntr = $("[rel='v-s:hasLink']", template),
        _class = new veda.IndividualModel("v-s:Link"),
        Link = new veda.IndividualModel();
    Link["rdf:type"] = [_class];
    Link["v-s:from"] = [individual];

    individual.isSync(false);

    if (isMutual) {
      Link["v-s:mutualMembership"] = [ true ];
    }
    Link.present(cntr, rowTmpl, "edit").then(function (newRow) {
      Link.one("beforeReset", function () {
        newRow.remove();
      });
      Link.one("afterSave", function () {
        newRow.remove();
      });
      if ( individual.isNew() ) {
        newRow.find(".action#save").hide();
      }
    });
  });

  individual.on("afterSave", saveHandler);
  template.one("remove", function () {
    individual.off("afterSave", saveHandler);
  });
  function saveHandler() {
    var children = $("[rel='v-s:hasLink']", template).children();
    children.each(function () {
      var link_template = $(this);
      var link_uri = link_template.attr("resource");
      var link = new veda.IndividualModel(link_uri);
      link.save();
      link_template.trigger("view");
    });
  }

  individual.on("v-s:hasLink", linksHandler);
  template.one("remove", function () {
    individual.off("v-s:hasLink", linksHandler);
  });
  linksHandler();
  function linksHandler () {
    if ( individual.hasValue("v-s:hasLink") ) {
      $(".links-table", template).removeClass("hidden");
    } else {
      $(".links-table", template).addClass("hidden");
    }
  }

//# sourceURL=v-s_LinksListTemplate.html_pre
</script>
<div>
  <table class="hidden links-table table table-condensed table-striped table-sortable">
    <thead>
      <tr>
        <th width="30%" about="v-s:Document" property="rdfs:label"></th>
        <th width="10%" about="v-s:created" property="rdfs:label"></th>
        <th width="20%" about="rdfs:comment" property="rdfs:label"></th>
        <th width="15%" about="v-s:mutualMembership" property="rdfs:label"></th>
        <th width="15%" about="v-s:creator" property="rdfs:label"></th>
        <th width="10%"></th>
      </tr>
    </thead>
    <tbody about="@" rel="v-s:hasLink" data-embedded="true" data-limit="5" data-more="true">
      <script>
        var displayedDoc = container.closest("[resource]").attr("resource");
        if ( this.hasValue("v-s:from", displayedDoc) ) {
          $(".link-from", template).remove();
        } else if ( this.hasValue("v-s:to", displayedDoc) ) {
          $(".link-to", template).remove();
        }
      </script>
      <tr>
        <td>
          <span class="link-from" about="@" rel="v-s:from" data-template="v-ui_ClassNameLabelLinkTemplate.html"></span>
          <span class="link-to view -edit -search" about="@" rel="v-s:to" data-template="v-ui_ClassNameLabelLinkTemplate.html"></span>
          <veda-control data-type="link" rel="v-s:to" class="-view edit search fulltext"></veda-control>
        </td>
        <td>
          <span class="link-from" about="@" rel="v-s:from"><span about="@" property="v-s:created"></span></span>
          <span class="link-to" about="@" rel="v-s:to"><span about="@" property="v-s:created"></span></span>
        </td>
        <td>
          <div class="view -edit -search" about="@" property="rdfs:comment"></div>
          <veda-control data-type="string" property="rdfs:comment" class="-view edit search"></veda-control>
        </td>
        <td about="@" class="form-inline">
          <div class="checkbox disabled">
            <label>
              <veda-control property="v-s:mutualMembership" data-type="boolean"></veda-control>
            </label>
          </div>
        </td>
        <td>
          <i><small about="@" rel="v-s:creator" data-template="v-ui_LabelTemplate.html"></small> <small about="@" property="v-s:created"></small></i>
        </td>
        <td><div class="pull-right" about="@" data-template="v-ui_IconButtonsTemplate.html" data-embedded="true"></div></td>
      </tr>
    </tbody>
  </table>
  <button class="margin-sm btn btn-success" id="add-link" about="v-s:AddLink" property="rdfs:label"></button>
</div>